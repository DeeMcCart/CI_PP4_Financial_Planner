{% extends 'base.html' %} {% block content %}
{% load crispy_forms_tags %}

<div class="container bg-grey">
    <div class="row g-0">
        <div class="row d-flex justify-content-center">
            <div class = "col-md-12 mt-5 pt-5">
                <div class = "row z-depth-3">
                    <div class="col-sm-12 rounded-left"> 
                        <h1> Add/ edit a personal action</h1>
                        <div class="input-form">
                            <form method="post" style="margin-top:1.3em" action="">
                            <br>
                            <br>
                            {% csrf_token %} 
                                
                            {{form.as_p}}
                            <p></p>
                            <a href="{% url 'create_action' %}">
                                <button class="btn btn-signup right" type="submit">Submit</button></a>
                                
                            <!-- <input type = "submit" value = "Submit"> -->
                            <a class="cancel-link" href="{% url 'my_planner' %}" > Cancel </a>
                            <p>
                            </p>
                            </form>
                        </div>    
                    </div> <!-- end class col col-sm-12 rounded-left-->
                </div> <!-- end div class row z-depth-3 -->
            </div> <!-- end div class col-md-10 mt-5 pt-5-->
        </div> <!-- end div class row d-flex justify-content-center -->
        
    </div> <!-- end div class row g-0 -->
     
</div> <!-- end div class container bg-grey -->
<!-- DMcC 16/11/23 the below javascript is a corrector/workaround for Bug Issue #20 -->
<script>
    function alter_form_field_display() {
        console.log("In function alter_form_field_display()")
        const action_user = document.getElementById("id_user");
        action_user.classList.add("hide-input-field"); 
        action_user.readOnly=true;
        user_label = action_user.previousElementSibling;
        user_label.classList.add("hide-input-field");
        document.getElementById("id_user_action_seq").readonly=true;
        document.getElementById("id_parent_article").readonly=true;
        }
    
/* the next function is a display corrector for very wide display of the user_action_desc field which throws out the remainder of the display */    
   function action_desc_display() {
        console.log("In function action_desc_display");
        document.getElementById("id_user_action_desc").classList.add("long-text-input");
        document.getElementById("id_parent_article").classList.add("long-text-input")
        }
        
    alter_form_field_display(); 
    action_desc_display();    
</script>             
{% endblock content %}